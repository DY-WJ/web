<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Payment</title>
        <link rel="stylesheet" href="paymentPage.css">
    </head>
    <body>
        <div class="head_top">
            <div class="title">
                <button>
                    <a href="/main/index.html">HOME</a>
                </button>
                <button>
                    <a href="">POP 100</a>
                </button>
                <button>
                    <a href="">발라드 100</a>
                </button>
                <button>
                    <a href="">힙합 100</a>
                </button>
                <button>
                    <a href="">R&B 100</a>
                </button>
                <button>
                    <a href="">동요 100</a>
                </button>
            </div>

            <div>
                미래대 님
                <button>
                    <a href="마이페이지 링크">마이페이지</a></button>
                <button>
                    <a href="/shoppingpage/shoppingPage.html">장바구니</a></button>
            </div>
        </div>

        <div class="top_back"></div>

        <div>
            <h1>주문결제</h1>
        </div>
        <div id="payment_container">
            <div id="address">
                <table>
                    <tr>
                        <td>이름</td>
                        <td id="name"><input type="text" id="input_value"></td>
                    </tr>
                    <tr>
                        <td>연락처</td>
                        <td id="contact"><input type="tel" id="input_value"></td>
                    </tr>
                    <tr>
                        <td>주소</td>
                        <td id="address"><input type="text"></td>
                    </tr>
                    <tr>
                        <td>배송 요청사항</td>
                        <td>
                            <select id="delivery_data">
                                <option value="문앞에 놓아주세요">문앞에 놓아주세요</option>
                                <option value="부재시 경비실에 맡겨주세요">부재시 경비실에 맡겨주세요</option>
                                <option value="부재시 연락주세요">부재시 연락주세요</option>
                                <option value="택배함에 놓아주세요">택배함에 놓아주세요</option>
                            </select>
                            <button id="add_delivery_request">+</button>
                        </td>
                    </tr>
                </table>
            </div>
            <div id="item">
                <table>
                    <thead>
                        <tr>
                            <th colspan="2">상품</th>
                            <th>수량</th>
                            <th>가격</th>
                            <th>할인금액</th>
                            <th>배송비</th>
                            <th>주문총액</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><img src="/src/img/music10.png" alt="상품 이미지"></td>
                            <td>How Sweet<br>포토카드 미포함</td>
                            <td>1</td>
                            <td>100,000
                                <span>원</span></td>
                            <td>-50,000
                                <span>원</span></td>
                            <td>5,000
                                <span>원</span></td>
                            <td>55,000
                                <span>원</span></td>
                        </tr>

                        <hr>
                        <tr>
                            <td colspan="4" rowspan="4" id="noline"></td>
                            <td>가격</td>
                            <td></td>
                            <td class="amount">100,000
                                <span>원</span></td>
                        </tr>
                        <tr>
                            <td>할인금액</td>
                            <td></td>
                            <td class="amount">-50,000
                                <span>원</span></td>
                        </tr>
                        <tr>
                            <td>배송비</td>
                            <td></td>
                            <td class="amount">5,000
                                <span>원</span></td>
                        </tr>
                        <tr>
                            <td id="noline"></td>
                            <td id="noline"></td>
                            <td class="amount">55,000
                                <span>원</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <hr>
            <div id="payment">
                <fieldset>
                    <legend>결제방법</legend>
                    <table>
                        <tr>
                            <td id="noline">
                                <label><input type="radio" name="payment_radio" value="card">신용카드</label>
                                <label><input type="radio" name="payment_radio" value="bank_transfer">무통장입금</label>
                                <label><input type="radio" name="payment_radio" value="account_transfer">실시간계좌이체</label><br>
                                <label><input type="radio" name="payment_radio" value="naver_pay">NAVER Pay</label>
                                <label><input type="radio" name="payment_radio" value="kakao_pay">kakao Pay</label>
                                <label><input type="radio" name="payment_radio" value="samsung_pay">SAMSUNG Pay</label>
                                <label><input type="radio" name="payment_radio" value="toss_pay">toss pay</label>
                            </td>
                        </tr>
                    </table>
                </fieldset>
            </div>
            <div id="buttom_wrapper">
                <div id="agreement_wrapper">
                    <div id="agreement_checkbox">
                        <h2>약관동의</h2>
                        <ul>
                            <li><label><input type="checkbox" name="agreement_checkbox">개인정보 3자 제공에 동의합니다</label></li>
                            <li><label><input type="checkbox" name="agreement_checkbox">결제대행서비스 이용약관에 동의 합니다.</label></li>
                            <li><label><input type="checkbox" name="agreement_checkbox">제품의 사용조건과 자사의 취소,환불규정에 동의합니다.</label></li>
                        </ul>
                    </div>
                    <canvas id="sign_canvas" style="background-color:aliceblue" width="800px" height="200"></canvas>
                </div>
            </div>
            <div id="pay">
                <button id="pay_button" onclick="checkAgreements()">결제하기</button>
            </div>
        </div>

        <script>
        function checkAgreements() {
            var checkboxes = document.getElementsByName('agreement_checkbox');
            var allChecked = true;
            for (var i = 0; i < checkboxes.length; i++) {
                if (!checkboxes[i].checked) {
                    allChecked = false;
                    break;
                }
            }
            if (!allChecked) {
                alert("약관에 모두 동의 해주세요");
            } else {
                window.location.href = "결제완료 페이지";
            }
        }

        var canvas, context;
        function init() {
            canvas = document.getElementById("sign_canvas");
            context = canvas.getContext("2d");

            context.lineWidth = 2; 
            context.strokeStyle = "black";

            canvas.addEventListener("mousemove", function (e) { move(e) }, false);
            canvas.addEventListener("mousedown", function (e) { down(e) }, false);
            canvas.addEventListener("mouseup", function (e) { up(e) }, false);
            canvas.addEventListener("mouseout", function (e) { out(e) }, false);
        }

        var startX=0, startY=0; 
        var dragging=false;
        function draw(curX, curY) { 
            context.beginPath();
            context.moveTo(startX, startY);
            context.lineTo(curX, curY);
            context.stroke();
        }
        function down(e) { 
            startX = e.offsetX; startY = e.offsetY; dragging = true;
        }
        function up(e) { dragging = false; }
        function move(e) {
            if(!dragging) return; 
            var curX = e.offsetX, curY = e.offsetY;
            draw(curX, curY);
            startX = curX; startY = curY;
        }
        function out(e) { dragging = false; }

        window.onload = init; 
        </script>
    </body>
</html>